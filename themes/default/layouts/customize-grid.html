{% extends "base.html" %}

{% block title %}{{ page.title }} | {{ site.title }}{% endblock %}
{% block description %}{{ page.meta.description | default(value=page.title) }}{% endblock %}

{% block content %}
<section class="customize-page">
    <header class="customize-header">
        <h1 class="customize-title">{{ page.title }}</h1>
        {% if page.meta.description %}
        <p class="customize-description">{{ page.meta.description }}</p>
        {% endif %}
    </header>

    {% if page.filter and page.items | length > 0 %}
    <div class="filter-bar">
        <button class="filter-btn active" data-filter="all">All</button>
        {% set categories = page.items | map(attribute="category") | unique %}
        {% for cat in categories %}
        {% if cat %}
        <button class="filter-btn" data-filter="{{ cat | slugify }}">{{ cat }}</button>
        {% endif %}
        {% endfor %}
    </div>
    {% endif %}

    <div class="customize-grid columns-{{ page.columns | default(value=3) }}">
        {% for item in page.items %}
        <article class="grid-item" data-category="{{ item.category | default(value='') | slugify }}">
            {% if item.image %}
            <div class="item-image">
                {% if item.link %}
                <a href="{{ item.link }}">
                    <img src="{{ item.image }}" alt="{{ item.title }}" loading="lazy">
                </a>
                {% else %}
                <img src="{{ item.image }}" alt="{{ item.title }}" loading="lazy">
                {% endif %}
            </div>
            {% endif %}

            <div class="item-content">
                {% if item.category %}
                <span class="item-category">{{ item.category }}</span>
                {% endif %}

                <h3 class="item-title">
                    {% if item.link %}
                    <a href="{{ item.link }}">{{ item.title }}</a>
                    {% else %}
                    {{ item.title }}
                    {% endif %}
                </h3>

                {% if item.description %}
                <p class="item-description">{{ item.description }}</p>
                {% endif %}

                {% if item.tags | length > 0 %}
                <div class="item-tags">
                    {% for tag in item.tags %}
                    <span class="item-tag">{{ tag }}</span>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </article>
        {% endfor %}
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    // Filter functionality
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const filter = btn.dataset.filter;

            // Update active button
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            // Filter items
            document.querySelectorAll('.grid-item').forEach(item => {
                if (filter === 'all' || item.dataset.category === filter) {
                    item.style.display = '';
                } else {
                    item.style.display = 'none';
                }
            });
        });
    });
</script>
{% endblock %}

<style>
    .customize-page {
        max-width: var(--container-max);
    }

    .customize-header {
        text-align: center;
        margin-bottom: var(--space-8);
    }

    .customize-title {
        font-size: var(--text-4xl);
        margin-bottom: var(--space-4);
    }

    .customize-description {
        font-size: var(--text-lg);
        color: var(--color-text-secondary);
        max-width: 600px;
        margin: 0 auto;
    }

    /* Filter Bar */
    .filter-bar {
        display: flex;
        justify-content: center;
        gap: var(--space-2);
        margin-bottom: var(--space-8);
        flex-wrap: wrap;
    }

    .filter-btn {
        padding: var(--space-2) var(--space-4);
        background: var(--color-bg-secondary);
        border: 1px solid var(--color-border);
        border-radius: var(--radius-full);
        font-size: var(--text-sm);
        font-weight: 500;
        color: var(--color-text-secondary);
        cursor: pointer;
        transition: all 0.2s;
    }

    .filter-btn:hover {
        border-color: var(--color-primary);
        color: var(--color-primary);
    }

    .filter-btn.active {
        background: var(--color-primary);
        border-color: var(--color-primary);
        color: white;
    }

    /* Grid Layout */
    .customize-grid {
        display: grid;
        gap: var(--space-6);
    }

    .customize-grid.columns-2 {
        grid-template-columns: repeat(2, 1fr);
    }

    .customize-grid.columns-3 {
        grid-template-columns: repeat(3, 1fr);
    }

    .customize-grid.columns-4 {
        grid-template-columns: repeat(4, 1fr);
    }

    @media (max-width: 1024px) {
        .customize-grid.columns-4 {
            grid-template-columns: repeat(3, 1fr);
        }
    }

    @media (max-width: 768px) {

        .customize-grid.columns-3,
        .customize-grid.columns-4 {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (max-width: 480px) {

        .customize-grid.columns-2,
        .customize-grid.columns-3,
        .customize-grid.columns-4 {
            grid-template-columns: 1fr;
        }
    }

    /* Grid Item */
    .grid-item {
        background: var(--color-bg);
        border: 1px solid var(--color-border);
        border-radius: var(--radius-lg);
        overflow: hidden;
        transition: box-shadow 0.2s, transform 0.2s;
    }

    .grid-item:hover {
        box-shadow: var(--shadow-lg);
        transform: translateY(-4px);
    }

    .item-image {
        aspect-ratio: 4/3;
        overflow: hidden;
    }

    .item-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s;
    }

    .grid-item:hover .item-image img {
        transform: scale(1.05);
    }

    .item-content {
        padding: var(--space-4);
    }

    .item-category {
        display: inline-block;
        font-size: var(--text-xs);
        font-weight: 500;
        color: var(--color-primary);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: var(--space-2);
    }

    .item-title {
        font-size: var(--text-lg);
        margin-bottom: var(--space-2);
        line-height: var(--leading-tight);
    }

    .item-title a {
        color: var(--color-text);
        text-decoration: none;
    }

    .item-title a:hover {
        color: var(--color-primary);
    }

    .item-description {
        font-size: var(--text-sm);
        color: var(--color-text-secondary);
        margin-bottom: var(--space-3);
    }

    .item-tags {
        display: flex;
        flex-wrap: wrap;
        gap: var(--space-1);
    }

    .item-tag {
        font-size: var(--text-xs);
        padding: var(--space-1) var(--space-2);
        background: var(--color-bg-secondary);
        border-radius: var(--radius-sm);
        color: var(--color-text-muted);
    }
</style>


